<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-us" xml:lang="en-us">
<head>
    <title>Pexip Health</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <meta name="robots" content="noindex, nofollow" />
    <script type="text/javascript" src="https://cklab-edges.ck-collab-engtest.com/static/webrtc/js/pexrtc.js"></script>
    <script type="text/javascript" src="webui.js"></script>
    <script type='text/javascript'>
    window.onload = function() {
        var url = window.location.href;
        var params = url.substr(url.indexOf("?")+1).split("&");
        var i;
        var qp = {};
        for (i=0;i<params.length;i++) {
            var kv = params[i].split("=");
            qp[kv[0]] = kv[1];
        }
        console.log(qp);

        var source = "";
        if ("join_pres" in qp) {
            source = "screen";
        }

        // Initialize with the provided parameters
        initialise("cklab-edges.ck-collab-engtest.com", qp['alias'], qp['bandwidth'], qp['name'], "", source);

        // Manage visibility based on URL parameters or other conditions
        if ("role" in qp) {
            document.getElementById("selectrole").classList.remove("hidden");
        } else if ("pin" in qp) {
            document.getElementById("pinentry").classList.remove("hidden");
        } else if ("room" in qp) {
            document.getElementById("ivrentry").classList.remove("hidden");
        } else {
            document.getElementById("maincontent").classList.remove("hidden");
        }
    }
    </script>
    <meta name="robots" content="NONE,NOARCHIVE" />
    <style>
        /* Container layout */
        #container {
            display: flex;
        }

        /* Sidebar (Vitals Dashboard) */
        #vitals-dashboard {
            width: 300px; /* Adjust width as needed */
            height: 100vh; /* Full viewport height */
            border-right: 1px solid #ccc; /* Optional border */
            padding: 10px;
            box-sizing: border-box;
        }

        /* Main content area */
        #maincontent {
            flex: 1; /* Take remaining space */
            padding: 20px;
        }

        /* Iframe styling */
        iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Ensure video container takes available space */
        #videocontainer {
            width: 100%;
            height: 100%;
        }

        /* Flexbox layout for content */
        .cf {
            display: flex;
        }
    </style>
</head>

<body class="home">
    <!-- Container -->
    <div id="container" class="site">
        <!-- Vitals Dashboard iframe -->
        <aside id="vitals-dashboard">
            <iframe src="https://your-vitals-dashboard-url.com" title="Vitals Dashboard"></iframe>
        </aside>

        <!-- Main Content -->
        <div id="maincontent" class="main cf hidden">
            <section class="top">
                <div id="videocontainer" class="videocontainer">
                    <video width="100%" height="100%" id="video" autoplay="autoplay" playsinline="playsinline" poster="img/spinner-genesys3.gif"></video>
                </div>
                <aside class="participants">
                    <h2 id="rosterheading">Participants</h2>
                    <div id="rosterlist" class="rosterlist">
                        <ul id="rosterul"></ul>
                    </div>
                    <div id="selfview" class="selfview" hidden>
                        <video id="selfvideo" autoplay="autoplay" playsinline="playsinline" muted="true"></video>
                    </div>
                </aside>
            </section>

            <footer id="controls" class="controls cf">
                <ul>
                    <li><a id="id_selfview" class="webrtcbutton btn-selfview" onclick="toggleSelfview();">Show Selfview</a></li>
                    <li><a id="id_muteaudio" class="webrtcbutton btn-audio" onclick="muteAudioStreams();">Mute Audio</a></li>
                    <li><a id="id_mutevideo" class="webrtcbutton btn-video" onclick="muteVideoStreams();">Mute Video</a></li>
                    <li><a id="id_fullscreen" class="webrtcbutton btn-fullscreen inactive" onclick="goFullscreen();">Fullscreen</a></li>
                    <li><a id="id_screenshare" class="webrtcbutton btn-presentscreen inactive" onclick="presentScreen();">Present Screen</a></li>
                    <li><a id="id_presentation" class="webrtcbutton btn-presentation inactive" onclick="togglePresentation();">No Presentation Active</a></li>
                    <li><a id="id_disconnect" class="webrtcbutton btn-disconnect" onclick="window.location='index.html';">Disconnect</a></li>
                </ul>
            </footer>
        </div>
    </div>
</body>
</html>
